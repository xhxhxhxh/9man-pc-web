(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{103:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(18)),a=_(n(104)),o=_(n(89)),i=_(n(90)),s=_(n(150)),c=_(n(49)),u=_(n(30)),d=_(n(32)),l=_(n(50)),f=_(n(51)),v=_(n(41)),p=_(n(268)),h=_(n(297)),m=_(n(298)),R=n(110);function _(e){return e&&e.__esModule?e:{default:e}}var k=n(31).EventEmitter,g=new v.default("RTCRoomManager"),y=function(e){function t(){(0,u.default)(this,t),g.debug("constructor");var e=(0,l.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return e.instance=null,e._rtcRoom=null,e._roomUsers=new s.default,e._peerId="",e._property={},e._device=null,e._createDevice(),e}var n;return(0,f.default)(t,e),(0,d.default)(t,[{key:"_createDevice",value:function(){var e=this;this._device=new h.default,this._device.on("device_error",(function(t){var n={code:1005,msg:t};e.RTCRoomErrorNotice(n)}))}},{key:"_createRtcRoom",value:function(e,t,n,r){var a=this,o=new p.default({host:e,port:t,roomId:n,peerId:r});return o.on("rtc-socket-connect",(function(e){a._rtcRoom.joinRoom(a._property)})),o.on("rtc-user-joined",(function(e){a.RTCRoomUserJoined(e)})),o.on("rtc-user-leaved",(function(e){a.RTCRoomUserLeaved(e)})),o.on("rtc-media-receive",(function(e){a.RTCRoomMediaReceive(e)})),o.on("rtc-message-receive",(function(e){a.RTCRoomMessageReceive(e)})),o.on("rtc-socket-message",(function(e){a.handleSocketMessageEvent(e)})),o.on("rtc-peer-connected",(function(e){a.RTCRoomPeerConnected(e)})),o.on("rtc-error-notice",(function(e){a.RTCRoomErrorNotice(e)})),o.on("rtc-audio-volume",(function(e){a.RTCRoomAudioVolume(e)})),o.on("rtc-user-stats",(function(e){a.RTCRoomStatsChange(e)})),o}},{key:"joinRoom",value:(n=(0,i.default)(o.default.mark((function e(t,n,r,a,i){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._device.checkDevice();case 2:this._peerId=a,this._property=this.buildUserProperty(i),this._rtcRoom=this._createRtcRoom(t,n,r,a),this._rtcRoom.join();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,a,o){return n.apply(this,arguments)})},{key:"leaveRoom",value:function(){this._rtcRoom.close()}},{key:"sendMessage",value:function(e,t){this._rtcRoom.sendMessage(e,t)}},{key:"notifyMessage",value:function(e,t){var n={receiver:t,data:e};this.sendNotificationMessage("user_message_notify",n)}},{key:"changeUserProperty",value:function(e,t,n){var r={peerId:e,receiver:t,property:n};this.sendNotificationMessage("user_property_change",r)}},{key:"changeAIControl",value:function(e){var t={peerId:e};this.sendRequestMessage("ai_control",t)}},{key:"changeAISyncStatus",value:function(e){var t={sync:e};this.sendRequestMessage("ai_sync",t)}},{key:"restartAICourseware",value:function(e){var t={resource:e||""};this.sendRequestMessage("ai_restart",t)}},{key:"openVideo",value:function(e,t){if(Array.isArray(t)||(t=[t]),e===this._peerId)this.handleRoomUserVideoControl(1,t);else{var n={peerId:e,mediaType:"video",status:1,except:t};this.sendNotificationMessage("user_media_control",n)}}},{key:"closeVideo",value:function(e,t){if(Array.isArray(t)||(t=[t]),e===this._peerId)this.handleRoomUserVideoControl(0,t);else{var n={peerId:e,mediaType:"video",status:0,except:t};this.sendNotificationMessage("user_media_control",n)}}},{key:"openAudio",value:function(e){if(e===this._peerId)this._rtcRoom.openAudio();else{var t={peerId:e,mediaType:"audio",status:1};this.sendNotificationMessage("user_media_control",t)}}},{key:"closeAudio",value:function(e){if(e===this._peerId)this._rtcRoom.closeAudio();else{var t={peerId:e,mediaType:"audio",status:0};this.sendNotificationMessage("user_media_control",t)}}},{key:"controlLocalVideo",value:function(e,t){t?this._rtcRoom.openVideo(e):this._rtcRoom.closeVideo(e)}},{key:"RTCRoomUserJoined",value:function(e){var t=e.peerId,n=e.properties;this.initRoomUsers(n),this.emit("user-joined",t)}},{key:"RTCRoomUserLeaved",value:function(e){var t=e.peerId;this.removeRoomUser(t),this.emit("user-leaved",t)}},{key:"RTCRoomMediaReceive",value:function(e){var t=e.peerId,n=e.stream;this.emit("media-receive",t,n)}},{key:"RTCRoomMessageReceive",value:function(e){var t=e.message;if("audio_volume_change"===t.event){var n=t.data.peerId,r=t.data.volume;this.emit("audio-volume-change",n,r)}else this.emit("message-receive",t)}},{key:"handleSocketMessageEvent",value:function(e){var t=e.method,n=e.data;if(t)e.request?this.handleRequestMessageEvent(t,n):e.notification&&this.handleNotificationMessageEvent(t,n);else{var r={code:402,msg:R.RTC_ERROR_MSG.MessageFormat_Error};this.RTCRoomErrorNotice(r)}}},{key:"RTCRoomPeerConnected",value:function(e){var t=e.peerId;this.emit("user-peer-connected",t)}},{key:"RTCRoomErrorNotice",value:function(e){this.emit("error-notice",e)}},{key:"RTCRoomAudioVolume",value:function(e){var t=e.peerId,n=e.volume;this.emit("audio-volume-change",t,n);var r={event:"audio_volume_change",data:{peerId:t,volume:n}};this._rtcRoom.sendMessage(r,null)}},{key:"RTCRoomStatsChange",value:function(e){var t={peerId:this._peerId,receiver:e.peerId,stats:e.stats};this.sendNotificationMessage("rtc_user_stats",t)}},{key:"handleRequestMessageEvent",value:function(e,t){}},{key:"handleNotificationMessageEvent",value:function(e,t){if("user_message_notify"===e){var n=t.peerId,r=t.data;this.emit("message-notify-receive",n,r)}else if("user_kick_out"===e){var a={code:403,msg:R.RTC_ERROR_MSG.Kick_Out};this.RTCRoomErrorNotice(a),this._rtcRoom.disconnect()}else if("user_property_change"===e){var o=t.peerId,i=t.property,s=this.getRoomUser(o);s&&s.changeProperty(i),this.emit("user-property-change",o,i)}else if("rtc_user_stats"===e){var c=t.peerId,u=t.stats;this.handleRoomRTCStats(u,c)}else if("user_media_control"===e){var d=t.mediaType,l=t.status,f=t.except;this.handleRoomUserMediaControl(d,l,f)}else"ai_start"===e?this.emit("ai-action-notify",e,t):"ai_result"===e&&this.emit("ai-action-notify",e,t)}},{key:"sendRequestMessage",value:function(e,t){var n={request:!0,method:e,data:t||{}};this._rtcRoom.socketEmit("message",n)}},{key:"sendNotificationMessage",value:function(e,t){var n={notification:!0,method:e,data:t||{}};this._rtcRoom.socketEmit("message",n)}},{key:"initRoomUsers",value:function(e){var t=this;(0,a.default)(e).forEach((function(n){var r=e[n];t.createRoomUser(n,r)}))}},{key:"createRoomUser",value:function(e,t){if(!this.getRoomUser(e)){var n=new m.default({peerId:e,property:t});this._roomUsers.set(e,n)}}},{key:"getRoomUser",value:function(e){return this._roomUsers.get(e)}},{key:"removeRoomUser",value:function(e){this._roomUsers.delete(e)}},{key:"getAllRoomUser",value:function(){return[].concat((0,r.default)(this._roomUsers.values()))}},{key:"buildUserProperty",value:function(e){var t=e||{};if(t.hasOwnProperty("name")||(t.name=""),!t.hasOwnProperty("role")){t.role=0;var n={code:102,msg:R.RTC_ERROR_MSG.Bad_Parameters};this.RTCRoomErrorNotice(n)}return t.peerId=this._peerId,t.device=this._device.deviceState,t}},{key:"handleRoomUserMediaControl",value:function(e,t,n){"video"===e?this.handleRoomUserVideoControl(t,n):"audio"===e?this.handleRoomUserAudioControl(t):g.error("media type error")}},{key:"handleRoomUserVideoControl",value:function(e,t){for(var n=[].concat((0,r.default)(this._roomUsers.keys())),a=0;a<n.length;a++){var o=n[a];t.indexOf(o)>-1||o===this._peerId||(1===e?this._rtcRoom.openVideo(o):this._rtcRoom.closeVideo(o))}}},{key:"handleRoomUserAudioControl",value:function(e){1===e?this._rtcRoom.openAudio():this._rtcRoom.closeAudio()}},{key:"handleRoomRTCStats",value:function(e,t){var n=this.getAudioStats(e.audio),r=this.getVideoStats(e.video);this.emit("rtc-user-stats",t,n,r)}},{key:"getAudioStats",value:function(e){var t=void 0;t=0===e.packetsSent?0:e.packetsLost/e.packetsSent;var n=this.getNetlevel(t);return{bitrate:e.bitrate,packetLossRate:t,latency:e.latency,jitter:e.jitter,netLevel:n}}},{key:"getVideoStats",value:function(e){var t=void 0;t=0===e.packetsSent?0:e.packetsLost/e.packetsSent;var n=this.getNetlevel(t);return{bitrate:e.bitrate,packetLossRate:t,latency:e.latency,frameWidth:e.frameWidth,frameHeight:e.frameHeight,netLevel:n}}},{key:"getNetlevel",value:function(e){return e<.01?5:e<.03&&e>=.01?4:e<.05&&e>=.03?3:e<.1&&e>=.05?2:1}},{key:"log",value:function(){this._rtcRoom.log()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(k);t.default=y},110:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.RTC_DEVICE_ERROR={NotFoundError:"未找到设备",NotReadableError:"设备被占用",OverconstrainedError:"设备不支持",NotAllowedError:"设备未授权",TypeError:"类型错误",AbortError:"硬件错误"},t.RTC_USER_ROLE={Teacher:1,Student:2,Visitor:3,Invisible:4},t.RTC_ERROR_MSG={Success:"正常",Not_Initialized:"没有初始化",Bad_Parameters:"参数错误",ConnectSocket_Error:"服务器连接失败",ConnectSocket_Disconnect:"服务器断开连接",ConnectSocket_Reconnect:"服务器重新连接",MessageFormat_Error:"消息格式错误",Undefined_Error:"对象不存在",Kick_Out:"你已被通知下线",VideoAccess_Failed:"请求获取麦克风权限失败",AudioAccess_Failed:"请求获取摄像头权限失败",Microphone_Disable:"麦克风不可用",Camera_Disable:"摄像头不可用"}},112:function(e,t){},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"netStatus-container"},[t("span",{class:{active:this.isActive}}),this._v(" "),t("span",{class:{active:this.isActive}}),this._v(" "),t("span",{class:{active:this.isActive}}),this._v(" "),t("span",{class:{active:this.isActive}})])},a=[];r._withStripped=!0},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mikeStatus-container"},[n("div",[n("span",{class:{active:e.volume>0}}),e._v(" "),n("span",{class:{active:e.volume>16}}),e._v(" "),n("span",{class:{active:e.volume>32}}),e._v(" "),n("span",{class:{active:e.volume>48}}),e._v(" "),n("span",{class:{active:e.volume>64}}),e._v(" "),n("span",{class:{active:e.volume>80}})]),e._v(" "),n("button",{ref:"triggerMike",staticStyle:{display:"none"},on:{click:e.triggerMike}})])},a=[];r._withStripped=!0},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this.$createElement;this._self._c;return this._m(0)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"speaker-container"},[t("div")])}];r._withStripped=!0},148:function(e,t,n){e.exports=n.p+"images/a41c6ca6-example.jpg"},163:function(e,t,n){"use strict";n.r(t);var r=n(72),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(125),s=n(6),c=!1;var u=function(e){c||n(301)},d=Object(s.a)(a.a,i.a,i.b,!1,u,"data-v-bacd4310",null);d.options.__file="src\\components\\liveBroadcast\\Speaker.vue",t.default=d.exports},175:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAeCAYAAAA2Lt7lAAAB80lEQVRIS7WWPWsUURSGnzP3BpZFQRsLjR8YUBAsBRvRGIP+ARsFCSGuzkZQLCxtbG0zs2piIyrYiKWiBgQRVOyUSFT0DwgqgoY7c2QnkxB1d2Z2uTvtPfd95nzeIxraKwgXAUO/n7LIkjsoc3z9V0I0NB8QGelXe/VeyjFpuYf/A5r2PbALeItyH0Gqw3QLyERmr4xL7B53B6jekjg5VV0cNBzaj+iLagD0rkTJid4A9gDCs/zOUYnco4IQ9QGYZDM10w6xIU32SIvPXgFZ6JtsRQhkhi+dvBddTXLvHlQJpxeANqhjzUnqyR25ys+1YD+A6SBEgwjlJb/dEbnJjxWIH0CTdWCfAvuAV/xyYysQL4As2ZOsp2af5JDXfHNjcpvv3gBrIA+AUeANxo2WAnSCGvXgAgSbELSwclLIbc4Dtg0pB5yzh0iZr1KS3fpgAdhNwajQM3acQDdUg+hGJJhZ9kDnSj2oJrpspSE7wcwjsi0Tj5Ipb4C/xFVnJU5Ot6FeADrFMEPmef7nNyRKGn4bLTTHEbmHakviJPQ+KrL4NxiR63z0Pq7LisBLDoogbUBpHxQJ6DTbSTES86nvRusG0LPsIDDvQAISt1euseg1Bxr28ugPfm0Z1OI18NUxtJcRLuXzu6ysO58rCyy5w52W3z85DTpWX7vt/AAAAABJRU5ErkJggg=="},268:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(357)),a=g(n(89)),o=g(n(18)),i=g(n(90)),s=g(n(16)),c=g(n(49)),u=g(n(30)),d=g(n(50)),l=g(n(32)),f=g(n(51)),v=g(n(150)),p=(g(n(353)),g(n(269))),h=g(n(41)),m=n(110),R=g(n(294)),_=g(n(295)),k=g(n(103));function g(e){return e&&e.__esModule?e:{default:e}}var y=n(31).EventEmitter,S=new h.default("RTCRoom"),C={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},A={video:{width:320,height:240,frameRate:{ideal:10,max:15}},audio:!0},w={offerToReceiveAudio:1,offerToReceiveVideo:1},T=(window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,window.URL||window.webkitURL||window.msURL||window.oURL,navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.mozRTCIceCandidate||window.RTCIceCandidate),b=window.mozRTCSessionDescription||window.RTCSessionDescription,I=(navigator.mozGetUserMedia,new(window.AudioContext||window.webkitAudioContext)),E=null,M=[],x=new v.default,U=new v.default,O=new v.default,L=function(e){function t(e){var n=e.host,r=e.port,a=e.roomId,o=e.peerId;(0,u.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return i._socketUrl="wss://"+n+":"+r+"/?roomId="+a+"&peerId="+o,i._socket=null,i._roomId=a,i._peerId=o,i._deviceStatus=0,i._volume_timer=null,i}var n,h,g,y,L,P,V,D;return(0,f.default)(t,e),(0,l.default)(t,null,[{key:"init",value:function(){S.debug("init")}}]),(0,l.default)(t,[{key:"join",value:function(){var e,t=this,n=this;this._socket=(0,p.default)(this._socketUrl),this._socket.once("connect",(function(e){S.debug("服务器连接成功"),t.emit("rtc-socket-connect",{})})),this._socket.on("connect_failed",(function(e){var n={code:401,msg:m.RTC_ERROR_MSG.ConnectSocket_Error};t.emit("rtc-error-notice",n)})),this._socket.on("disconnect",(function(e){var n={code:410,msg:m.RTC_ERROR_MSG.ConnectSocket_Disconnect};t.emit("rtc-error-notice",n)})),this._socket.on("reconnect",(function(e){var n={code:411,msg:m.RTC_ERROR_MSG.ConnectSocket_Reconnect};t.emit("rtc-error-notice",n)})),this._socket.on("reconnecting",(function(e){S.debug("正在重新连接...")})),this._socket.on("_ack",(function(e,t){t("我是ack")})),this._socket.on("ping",(function(e){S.debug("ping")})),this._socket.on("pong",(function(e){S.debug("pong")})),this._socket.on("message",(function(e){var n=void 0;"string"==typeof e?n=JSON.parse(e):"object"===(void 0===e?"undefined":(0,s.default)(e))&&(n=e),t.emit("rtc-socket-message",n)})),this._socket.on("signaling",(e=(0,i.default)(a.default.mark((function e(r){var i,c,u,d,l,f,v,p,h,m,R,_,k,g,y,A,w,I,E,U;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=void 0,"string"==typeof r?i=JSON.parse(r):"object"===(void 0===r?"undefined":(0,s.default)(r))&&(i=r),S.debug("signaling [method:%s]",i.method),c=i.data,e.t0=i.method,e.next="peers"===e.t0?7:"new_peer"===e.t0?36:"desc"===e.t0?50:"candidate"===e.t0?65:"remove_peer"===e.t0?71:74;break;case 7:return c.iceServers&&(C.iceServers=c.iceServers),u={peerId:t._peerId,properties:c.properties},t.emit("rtc-user-joined",u),e.next=12,t.initLocalMediaStream();case 12:M=c.peerIds,e.t1=a.default.keys(M);case 14:if((e.t2=e.t1()).done){e.next=20;break}return d=e.t2.value,e.next=18,n._createPeerConnection(M[d],!0);case 18:e.next=14;break;case 20:l=[].concat((0,o.default)(x.keys())),e.t3=a.default.keys(l);case 22:if((e.t4=e.t3()).done){e.next=35;break}return f=e.t4.value,v=l[f],p=x.get(v),e.next=28,n._addTrack(p);case 28:if(0===((h=c.properties[v]).device?h.device:0)&&0!==t._deviceStatus){e.next=33;break}return e.next=33,n._createOffer(p,v);case 33:e.next=22;break;case 35:return e.abrupt("break",74);case 36:if(m=c.peerId,(R={})[m]=c.property,_={peerId:m,properties:R},t.emit("rtc-user-joined",_),-1===M.indexOf(m)&&M.push(m),n._createPeerConnection(m,!1),k=x.get(m),n._addTrack(k),0===(c.property.device?c.property.device:0)||0!==t._deviceStatus){e.next=49;break}return e.next=49,n._createOffer(k,m);case 49:return e.abrupt("break",74);case 50:if(g=c.desc,y=c.from,A=x.get(y),"offer"!==g.type){e.next=58;break}return e.next=56,n._createAnswer(A,y,g);case 56:e.next=64;break;case 58:if("answer"!==g.type){e.next=63;break}return e.next=61,A.setRemoteDescription(new b(g));case 61:e.next=64;break;case 63:S.error("Unsupported SDP type. Your code may differ here.");case 64:return e.abrupt("break",74);case 65:return w=c.candidate,I=new T({candidate:w.sdp,sdpMid:w.sdpMid,sdpMLineIndex:w.sdpMLineIndex}),E=x.get(c.from),e.next=70,E.addIceCandidate(I);case 70:return e.abrupt("break",74);case 71:return U=c.peerId,t._closeConnection(U),e.abrupt("break",74);case 74:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)}))}},{key:"joinRoom",value:(D=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.debug("_joinRoom()"),this._deviceStatus=t?t.device:0,n=t||{},r=this._signalingFactory("join",n),this.socketEmit("signaling",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"_createPeerConnection",value:(V=(0,i.default)(a.default.mark((function e(t,n){var r,o,s,c,u=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.debug("_createPeerConnection() [peerId:%s]",t),r=this,o=new RTCPeerConnection(C),x.set(t,o),o.onicecandidate=function(e){var n=e.candidate;if(n){var a={from:r._peerId,to:t,room:r._roomId,candidate:{sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,sdp:n.candidate}},o=u._signalingFactory("candidate",a);u.socketEmit("signaling",o)}},o.oniceconnectionstatechange=function(e){"connected"===o.iceConnectionState?(u.emit("rtc-peer-connected",{peerId:t}),u.gatherStats(o,t)):"failed"===o.iceConnectionState||"disconnected"===o.iceConnectionState||"closed"===o.iceConnectionState?u.clearStats(t):o.iceConnectionState},o.onnegotiationneeded=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,u)}))),n?(s={ordered:!0,id:25,negotiated:!1,protocol:""},c=o.createDataChannel("channel",s),r._setupChannel(t,c)):o.ondatachannel=function(e){r._setupChannel(t,e.channel)},o.ontrack=function(e){S.debug("ontrack()");var n={peerId:t,stream:e.streams[0]};u.emit("rtc-media-receive",n)};case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return V.apply(this,arguments)})},{key:"_setupChannel",value:function(e,t){var n=this;t.onopen=function(){S.debug("channel.onopen()")},t.onclose=function(){S.debug("channel.onclose()")},t.onerror=function(e){S.debug("channel.onerror() [%s]",e)},t.onmessage=function(e){n._receiveMessage(e.data)},U.set(e,t)}},{key:"_getChannel",value:function(e){return U.get(e)}},{key:"_createOffer",value:(P=(0,i.default)(a.default.mark((function e(t,n){var r,o,i,s,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,e.prev=1,e.next=4,t.createOffer([w]);case 4:return o=e.sent,i=r._rewriteSdp(o,n),e.next=8,t.setLocalDescription(i);case 8:s={from:r._peerId,to:n,room:r._roomId,desc:t.localDescription},c=r._signalingFactory("desc",s),r.socketEmit("signaling",c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e,t){return P.apply(this,arguments)})},{key:"_createAnswer",value:(L=(0,i.default)(a.default.mark((function e(t,n,r){var o,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.prev=1,e.next=4,t.setRemoteDescription(new b(r));case 4:return e.t0=t,e.next=7,t.createAnswer();case 7:return e.t1=e.sent,e.next=10,e.t0.setLocalDescription.call(e.t0,e.t1);case 10:i={from:o._peerId,to:n,room:o._roomId,desc:t.localDescription},s=o._signalingFactory("desc",i),o.socketEmit("signaling",s),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(1),console.error(e.t2);case 18:case"end":return e.stop()}}),e,this,[[1,15]])}))),function(e,t,n){return L.apply(this,arguments)})},{key:"_rewriteSdp",value:function(e,t){var n=e.sdp,r=void 0,a=k.default.getInstance(),o=a.getRoomUser(this._peerId),i=a.getRoomUser(t),s=o.property.role==m.RTC_USER_ROLE.Invisible,c=i.property.role==m.RTC_USER_ROLE.Invisible;return r=s&&c?n.replace(/sendrecv/g,"inactive"):s&&!c?n.replace(/sendrecv/g,"recvonly"):!s&&c?n.replace(/sendrecv/g,"sendonly"):n,e.sdp=r,e}},{key:"sendMessage",value:function(e,t){var n=(0,r.default)(e);if(t){var a=this._getChannel(t);if(void 0===a){var o={code:405,msg:m.RTC_ERROR_MSG.Undefined_Error};return void this.emit("rtc-error-notice",o)}"open"===a.readyState.toLowerCase()&&a.send(n)}else U.forEach((function(e,t,r){"open"===e.readyState.toLowerCase()&&e.send(n)}))}},{key:"_receiveMessage",value:function(e){if("string"==typeof e){var t={message:JSON.parse(e)};this.emit("rtc-message-receive",t)}}},{key:"_addTrack",value:(y=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==this._deviceStatus){e.next=2;break}return e.abrupt("return");case 2:if(E){e.next=5;break}return e.next=5,this.initLocalMediaStream();case 5:try{E.getTracks().forEach((function(e){t.addTrack(e,E)}))}catch(e){console.error(e)}case 6:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"initLocalMediaStream",value:(g=(0,i.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==this._deviceStatus){e.next=2;break}return e.abrupt("return");case 2:if(E){e.next=11;break}return t=A,1===this._deviceStatus?t={video:!1,audio:!0}:2===this._deviceStatus&&(t={video:!0,audio:!1}),e.next=7,navigator.mediaDevices.getUserMedia(t);case 7:E=e.sent,n={peerId:this._peerId,stream:E},this.emit("rtc-media-receive",n),0!==this._deviceStatus&&1!==this._deviceStatus||this.voiceActivityDetection();case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"voiceActivityDetection",value:function(){var e=this;"function"==typeof I.resume&&"running"!==I.state&&I.resume().then((function(){S.debug("resumed successfully")}));var t=new R.default(I);t.connectToSource(E,(function(n){n?S.error(n):e._volume_timer=setInterval((function(){var n=t.instant.toFixed(2);n>0&&E.getAudioTracks()[0].enabled&&e.emit("rtc-audio-volume",{peerId:e._peerId,volume:n})}),2e3)}))}},{key:"openVideo",value:(h=(0,i.default)(a.default.mark((function e(t){var n,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=x.get(t))){e.next=10;break}if(r=this.getRTCRtpSenderVideo(n),!E.getVideoTracks().length||!r){e.next=9;break}return o=E.getVideoTracks()[0],e.next=7,r.replaceTrack(o);case 7:e.next=10;break;case 9:S.error("RTCMediaStreamTrack not exist!");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"closeVideo",value:(n=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=x.get(t))){e.next=9;break}if(!(r=this.getRTCRtpSenderVideo(n))){e.next=8;break}return e.next=6,r.replaceTrack(null);case 6:e.next=9;break;case 8:S.error("RTCRtpSender not exist!");case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getRTCRtpSenderVideo",value:function(e){for(var t=e.getSenders(),n=0;n<t.length;n++){var r=t[n],a=r.track;if(!a||"video"===a.kind)return r}return null}},{key:"openAudio",value:function(){E.getAudioTracks()[0].enabled=!0}},{key:"closeAudio",value:function(){E.getAudioTracks()[0].enabled=!1}},{key:"close",value:function(){var e=this;clearInterval(e._volume_timer),x.forEach((function(t,n,r){e.clearStats(n),t.close()})),M=[],x=new v.default,U=new v.default,O=new v.default;var t={peerId:this._peerId},n=this._signalingFactory("remove_peer",t);this._socket.emit("signaling",(0,r.default)(n),(function(t){e.disconnect()}))}},{key:"_closeConnection",value:function(e){this.clearStats(e);var t=x.get(e);t&&t.close();var n=M.indexOf(e);n>-1&&(M.splice(n,1),x.delete(e),U.delete(e));var r={peerId:e};this.emit("rtc-user-leaved",r)}},{key:"disconnect",value:function(){this._socket&&(this._socket.disconnect(!0),this._socket=null)}},{key:"_signalingFactory",value:function(e,t){return{signaling:!0,method:e,data:t||{}}}},{key:"socketEmit",value:function(e,t){this._socket&&this._socket.emit(e,(0,r.default)(t))}},{key:"gatherStats",value:function(e,t){var n=this,r=O.get(t);r&&"undefined"!==r||((r=new _.default({peerId:t})).on("user-stats",(function(e){n.emit("rtc-user-stats",e)})),O.set(t,r)),r.startReport(e)}},{key:"clearStats",value:function(e){var t=O.get(e);t&&(t.close(),O.delete(e))}},{key:"log",value:function(){}}]),t}(y);t.default=L},291:function(e,t){},294:function(e,t){function n(e){this.context=e,this.instant=0,this.slow=0,this.clip=0,this.script=e.createScriptProcessor(2048,1,1);var t=this;this.script.onaudioprocess=function(e){var n=e.inputBuffer.getChannelData(0),r=void 0,a=0,o=0;for(r=0;r<n.length;++r)a+=n[r]*n[r],Math.abs(n[r])>.99&&(o+=1);t.instant=Math.sqrt(a/n.length),t.slow=.95*t.slow+.05*t.instant,t.clip=o/n.length}}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.connectToSource=function(e,t){console.log("SoundMeter connecting");try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),void 0!==t&&t(null)}catch(e){console.error(e),void 0!==t&&t(e)}},n.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},t.default=n},295:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(104)),a=l(n(49)),o=l(n(30)),i=l(n(32)),s=l(n(50)),c=l(n(51)),u=l(n(41)),d=l(n(296));function l(e){return e&&e.__esModule?e:{default:e}}var f=n(31).EventEmitter,v=(new u.default("RTCStats"),function(e){function t(e){var n=e.peerId;(0,o.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return r._peerId=n,r._timer=null,r._RTCStatsResult={},r._localCandidateId=null,r._remoteCandidateId=null,r.audioTrackStats=new d.default,r.videoTrackStats=new d.default,r.initRTCStatsResult(),r}return(0,c.default)(t,e),(0,i.default)(t,[{key:"initRTCStatsResult",value:function(){this._RTCStatsResult={audio:{bitrate:0,packetsSent:0,packetsReceived:0,packetsLost:0,latency:0,jitter:0},video:{bitrate:0,packetsSent:0,packetsReceived:0,packetsLost:0,latency:0,frameWidth:0,frameHeight:0},connection:{local:{candidateType:"",ip:"",port:0,networkType:""},remote:{candidateType:"",ip:"",port:0}}}}},{key:"statsOutput",value:function(){return this._RTCStatsResult}},{key:"startReport",value:function(e){var t=this;t._timer||(t._timer=setInterval((function(){if(e){e.getStats(null).then((function(e){e.forEach((function(e){t.parseStatsReport(e)}))}));var n={peerId:t._peerId,stats:t._RTCStatsResult};t.emit("user-stats",n)}else t.close()}),1e4))}},{key:"close",value:function(){clearInterval(this._timer),this._timer=null}},{key:"parseStatsReport",value:function(e){"candidate-pair"===e.type?this.parseConnectionStatsReport(e):"local-candidate"===e.type?this.parseLocalCandidateStatsReport(e):"remote-candidate"===e.type?this.parseRemoteCandidateStatsReport(e):"track"===e.type?(!1===e.remoteSource&&this.parseSendTrackStatsReport(e),!0===e.remoteSource&&this.parseRecvTrackStatsReport(e)):"outbound-rtp"===e.type?("audio"===e.kind&&this.parseSendAudioRtpStatsReport(e),"video"===e.kind&&this.parseSendVideoRtpStatsReport(e)):"inbound-rtp"===e.type?("audio"===e.kind&&this.parseRecvAudioRtpStatsReport(e),"video"===e.kind&&this.parseRecvVideoRtpStatsReport(e)):"remote-inbound-rtp"===e.type&&("audio"===e.kind&&this.parseAudioRttStatsReport(e),"video"===e.kind&&this.parseVideoRttStatsReport(e))}},{key:"parseConnectionStatsReport",value:function(e){var t=this;!0===e.nominated&&(0,r.default)(e).forEach((function(n){"localCandidateId"===n?t._localCandidateId=e[n]:"remoteCandidateId"===n&&(t._remoteCandidateId=e[n])}))}},{key:"parseLocalCandidateStatsReport",value:function(e){var t=this;e.id===t._localCandidateId&&(0,r.default)(e).forEach((function(n){"candidateType"===n?t._RTCStatsResult.connection.local.candidateType=e[n]:"ip"===n?t._RTCStatsResult.connection.local.ip=e[n]:"port"===n?t._RTCStatsResult.connection.local.port=e[n]:"networkType"===n&&(t._RTCStatsResult.connection.local.networkType=e[n])}))}},{key:"parseRemoteCandidateStatsReport",value:function(e){var t=this;e.id===t._remoteCandidateId&&(0,r.default)(e).forEach((function(n){"candidateType"===n?t._RTCStatsResult.connection.remote.candidateType=e[n]:"ip"===n?t._RTCStatsResult.connection.remote.ip=e[n]:"port"===n&&(t._RTCStatsResult.connection.remote.port=e[n])}))}},{key:"parseSendTrackStatsReport",value:function(e){var t=this;"video"===e.kind&&(0,r.default)(e).forEach((function(n){"frameHeight"===n?t._RTCStatsResult.video.frameHeight=e[n]:"frameWidth"===n&&(t._RTCStatsResult.video.frameWidth=e[n])}))}},{key:"parseRecvTrackStatsReport",value:function(e){"video"===e.kind&&(0,r.default)(e).forEach((function(e){}))}},{key:"parseSendAudioRtpStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"bytesSent"===n?t._RTCStatsResult.audio.bitrate=t.audioTrackStats.calculateBitrate(e[n]):"packetsSent"===n&&(t._RTCStatsResult.audio.packetsSent=t.audioTrackStats.calculatePacketsSent(e[n]))}))}},{key:"parseSendVideoRtpStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"bytesSent"===n?t._RTCStatsResult.video.bitrate=t.videoTrackStats.calculateBitrate(e[n]):"packetsSent"===n&&(t._RTCStatsResult.video.packetsSent=t.videoTrackStats.calculatePacketsSent(e[n]))}))}},{key:"parseRecvAudioRtpStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"bytesReceived"===n||("packetsReceived"===n?t._RTCStatsResult.audio.packetsReceived=t.audioTrackStats.calculatePacketsReceived(e[n]):"packetsLost"===n&&(t._RTCStatsResult.audio.packetsLost=t.audioTrackStats.calculatePacketsLost(e[n])))}))}},{key:"parseRecvVideoRtpStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"bytesReceived"===n||("packetsReceived"===n?t._RTCStatsResult.video.packetsReceived=t.videoTrackStats.calculatePacketsReceived(e[n]):"packetsLost"===n&&(t._RTCStatsResult.video.packetsLost=t.videoTrackStats.calculatePacketsLost(e[n])))}))}},{key:"parseAudioRttStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"roundTripTime"===n?t._RTCStatsResult.audio.latency=parseInt(1e3*e[n]):"jitter"===n&&(t._RTCStatsResult.audio.jitter=parseInt(1e3*e[n]))}))}},{key:"parseVideoRttStatsReport",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){"roundTripTime"===n&&(t._RTCStatsResult.video.latency=parseInt(1e3*e[n]))}))}}]),t}(f));t.default=v},296:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(30)),a=i(n(32)),o=i(n(41));function i(e){return e&&e.__esModule?e:{default:e}}n(31).EventEmitter,new o.default("RTCTrackStats");var s=function(){function e(){(0,r.default)(this,e),this.prevTime=0,this.prevPacketsSent=0,this.prevPacketsReceived=0,this.prevBytes=null,this.prevPacketsLost=null,this.prevLatency=null}return(0,a.default)(e,[{key:"calculatePacketsSent",value:function(e){var t=e-this.prevPacketsSent;return this.prevPacketsSent=e,t}},{key:"calculatePacketsReceived",value:function(e){var t=e-this.prevPacketsReceived;return this.prevPacketsReceived=e,t}},{key:"calculateBitrate",value:function(e){this.prevBytes||(this.prevBytes=e);var t=0,n=(new Date).getTime()/1e3;return this.prevTime&&e>this.prevBytes&&(t=(e-this.prevBytes)/(n-this.prevTime)),this.prevBytes=e,this.prevTime=n,parseInt(t/1e3)}},{key:"calculatePacketsLost",value:function(e){this.prevPacketsLost||(this.prevPacketsLost=e);var t=e-this.prevPacketsLost;return this.prevPacketsLost=e,(t=parseInt(t))<0&&(t=0),t}},{key:"calculateLatency",value:function(e){this.prevLatency||(this.prevLatency=e);var t=e-this.prevLatency;return this.prevLatency=e,(t=parseInt(1e3*t))<0&&(t=0),t}}]),e}();t.default=s},297:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(89)),a=f(n(90)),o=f(n(49)),i=f(n(30)),s=f(n(32)),c=f(n(50)),u=f(n(51)),d=n(110),l=f(n(41));function f(e){return e&&e.__esModule?e:{default:e}}var v=n(31).EventEmitter,p=new l.default("RTCDevice"),h=function(e){function t(){(0,i.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.deviceState=0,e._deviceList=[],e}var n,l;return(0,u.default)(t,e),(0,s.default)(t,[{key:"checkDevice",value:(l=(0,a.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=3;break}return p.debug("不支持 getUserMedia()"),e.abrupt("return");case 3:return e.next=5,this.checkDeviceStatus();case 5:return t=this,n={video:!0,audio:!0},e.next=9,navigator.mediaDevices.getUserMedia(n).then((function(e){})).catch((function(e){"NotFoundError"===e.name?t._emitError(d.RTC_DEVICE_ERROR.NotFoundError):"NotReadableError"===e.name?t._emitError(d.RTC_DEVICE_ERROR.NotReadableError):"OverconstrainedError"===e.name?t._emitError(d.RTC_DEVICE_ERROR.OverconstrainedError):"NotAllowedError"===e.name?t._emitError(d.RTC_DEVICE_ERROR.NotAllowedError):"TypeError"===e.name?t._emitError(d.RTC_DEVICE_ERROR.TypeError):"AbortError"===e.name&&t._emitError(d.RTC_DEVICE_ERROR.AbortError)}));case 9:navigator.mediaDevices.ondevicechange=function(e){console.log(e)};case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"checkDeviceStatus",value:(n=(0,a.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=!0,e.next=4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(e){})).catch((function(e){t=!1}));case 4:return e.next=6,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){})).catch((function(e){n=!1}));case 6:this.deviceState=t&&n?0:t&&!n?1:!t&&n?2:3;case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_emitError",value:function(e){this.emit("device_error",e)}},{key:"gotDevice",value:function(){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){}))})).catch((function(e){console.log(e.name+": "+e.message)})):p.debug("不支持 enumerateDevices()")}}]),t}(v);t.default=h},298:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(104)),a=d(n(49)),o=d(n(30)),i=d(n(32)),s=d(n(50)),c=d(n(51)),u=d(n(41));function d(e){return e&&e.__esModule?e:{default:e}}var l=n(31).EventEmitter,f=(new u.default("RTCRoomUser"),function(e){function t(e){var n=e.peerId,r=e.property;(0,o.default)(this,t);var i=(0,s.default)(this,(t.__proto__||(0,a.default)(t)).call(this));return i._peerId=n,i._property=r,i}return(0,c.default)(t,e),(0,i.default)(t,[{key:"init",value:function(e,t){this._peerId=e,this._property=t}},{key:"changeProperty",value:function(e){var t=this;(0,r.default)(e).forEach((function(n){var r=e[n];t._property.hasOwnProperty(n)&&(t._property[n]=r)}))}},{key:"peerId",get:function(){return this._peerId}},{key:"property",get:function(){return this._property}},{key:"name",get:function(){return this._property.name?this._property.name:""}},{key:"role",get:function(){return this._property.role?this._property.role:0}}]),t}(l));t.default=f},299:function(e,t){},300:function(e,t){},301:function(e,t){},310:function(e,t){},311:function(e,t){},319:function(e,t){},321:function(e,t){},329:function(e,t){},35:function(e,t,n){"use strict";n.r(t);var r=n(71),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(124),s=n(6),c=!1;var u=function(e){c||n(300)},d=Object(s.a)(a.a,i.a,i.b,!1,u,"data-v-4235d9c2",null);d.options.__file="src\\components\\liveBroadcast\\MikeStatus.vue",t.default=d.exports},41:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(30)),a=i(n(32)),o=i(n(265));function i(e){return e&&e.__esModule?e:{default:e}}var s="ChildThink",c=function(){function e(t){(0,r.default)(this,e),t?(this._debug=(0,o.default)(s+":"+t),this._warn=(0,o.default)(s+":WARN:"+t),this._error=(0,o.default)(s+":ERROR:"+t)):(this._debug=(0,o.default)(s),this._warn=(0,o.default)(s+":WARN"),this._error=(0,o.default)(s+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,a.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();t.default=c},44:function(e,t,n){"use strict";n.r(t);var r=n(70),a=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(123),s=n(6),c=!1;var u=function(e){c||n(299)},d=Object(s.a)(a.a,i.a,i.b,!1,u,"data-v-3b7a2e28",null);d.options.__file="src\\components\\liveBroadcast\\NetStatus.vue",t.default=d.exports},52:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAjCAYAAAB/wZEbAAADHklEQVRIS+2WS0iVQRTH/1NaqSUZFUVQSItaZO+UgsAWEUIZZFYgwdX0XnNRQctslS2DamGppUIIpRX0gIgWCUGhPc0WtYgwiKKiRMvKzOk3373GvfqpV9xVA+ebb86c858z5zEzRqM0W6JcGQWhdYimQZ9ldReqNjW6OpK6GW7S7laKktXA/NYRAK6oRwXmnL76yfiCW2FnSDdQ2DTazpi/qSrlAIRabPMHL1UA0bo4gMMiRoXmtOrjAw+pBcHMuMGlVlOlrFHBbVCJWNKDYMIYwPvYabKp1s9onSFusQFN12QyYqzth9JMvTr/g8c67r9bfBPp73KLLVY6FbmS9L9mmtQ73iKy+ZpEGW6hYh8ZG9JbfDiHwVHKt3zc4EFVYOwhMN85cHceuHPkAofPLm/lGfrGeMIYToB+fVKSt/OQzqO3E+pz4B38zMfyh1i+2gHCe0K3bAzgbRi23NMN6gGWr+L3tQO/xM826Jd6NdfU6QMC+xA4ETe41X4MO2kLNYt9OzdPhC4b7sgADhi4GA5jQUXk2L2DwJAz2mfBFna93h23GFrO/BFPpp8LBKBkrHzFcDZC3difYc6qA/5M+O4CXjvCDu6hkwvwR7tHC7C3HZ1pyL+Hn+6d5wDthVkZAXmsL8o2Deqy2QR6kYrhl0DOpy7I/ZCLSY1e6IxpVp8tUKqmqhneCg/DqowFT4XBnVJQ11kgJ7JAG8w8BF4OWO3tsI8MTlAnfHdThXGCWoiei1s4ASwXe7U2A9z/5yayRWwnUbeYHvBzD0rHGVdy+b4Z7BpbqnnwygA7QJ8cmW8hsTeaWtxLi7nmIm+VWvg7osCcG9qhZ0h3AZbK/xIoA4quhUb2UxT9hvF/WpQoD7UKlBcPtthn/JwolPP6cq6JacO/uJxVIW1w2YDFWfSZ9Ibe8m3l2+JlU5VuO//6GTEs+BAfh7wjYQr0nVpIimNHsT4fSYEC+dfBOW/WEM5juMmV8kBbGkk9F7ynUfxuwnmQbLkfV7ZQII1kQ348QfNkjJootOjaiLB9EAjedsDrUUoZdQHLw98oQAZdHCz7GzgIIvJ89QmxAAAAAElFTkSuQmCC"},67:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAjCAYAAAATx8MeAAADIklEQVRYR82YS0hUURjH/ydDwhaKBYaCWWbkoiAiaFMtkrJliRAEETXNhLYIelH0kJIQF9YirCx7QEVY+yLKwhYtiiCCAi2ygqIQKx8QKJ1+d8xpypnxPmbUA5dz5875n+93v/Od75xzjQIWG1aOjG7RzVpZPdKgqsx19QXp1gQRO1ob0WGqE7F+rBpMiw4G6TcQlN2qPGXrHZ7Ki4MYwGPzAOvxCxYMKqxjANUlMF5vzuvIhEMl8dIoR5+G8Varev2A+fYUAZ7MS6Mcvr3lC2ocLwX2lj+o8b0UyFueoVx66a+3+lVibuibl9jyDhVRAwYOuDbiI2+lhLLVylKuijVNZUCUMv1XkoM2Ubt/GYtCusbVwV0Xyk5y2OdULxXt3G5TIeYXIyjjKuXRAq4yJwnyO9u1V9w3dBLsGwcwWitad2lIr8wVfTdM7UM8rPf09u6Ne205jGCvYe0a5CbHqzqD7fsdqM7oUE2d0m1sSMuIp7swzZ4CXH36pfUjgR7SEsDucVswiWC9AFWaC3oam9qAlTP17xPwhZMA9gWb69hZvHBs/5Nv7HZSwXQ94HnxhIFZfcJDFeaiXo/aHJMEAZsLWDsN5mcczOo9NtaQTN/G20qYme1OFUHfjh8XZhCsi4RZAdCH/20kXS6IsQJi7CFg5WkHswzVMECXGLoEJfXaF9IKZuWTtENJywnqZ8n6TQ01El/daYcyKjDn9NUfVESVCO+kHUpajac6/EGFtY+YaswAVC1Qzf6gIrqKcEsGoJqBqvUL9Rzh0gxAPQZqlWeo6K4zXwMIZ2QAqheoWd6hwlpEPMVSf9rBhlTkOU+xI60Gqs0FTA+Z+RTtnNlUgWY3de64OssC3BLdmYwpyTN6WMcxkOp7wA96a2KAT8d/+mHtzCe37Qd0F/qZKeD2MIRNXqFu02nVGJFl+2x0hmWiMdW3AlujObRxPhPtSHL4aAUq5A0qEj0WbY4T/eTtW1ioT7LNcPY/rgqLewm6o39SS1ZMZHSWrF7jDSocPefdpEPnuNXG8afeXNZHVyQJGhGjzsSpo78N/P2Sa2OiHYIj/Q1IsuE0Bhe5iAAAAABJRU5ErkJggg=="},70:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"NetStatus",data:function(){return{isActive:!0}}}},71:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"MikeStatus",data:function(){return{volume:0,context:null}},props:["openMike","identity","rtcRoom","id"],mounted:function(){this.openMike&&("others"===this.identity?this.getVolumeFromOthers():this.audio())},methods:{audio:function(){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,!navigator.getUserMedia)return this.$message.error("多媒体监听异常,建议使用高版本的谷歌浏览器");navigator.getUserMedia({video:!1,audio:!0},this.onSuccess,this.onError)},onSuccess:function(e){var t=this,n=this.context.createMediaStreamSource(e),r=this.context.createScriptProcessor(4096,1,1);n.connect(r),r.connect(this.context.destination),this.$refs.triggerMike.click(),r.onaudioprocess=function(e){var n=e.inputBuffer.getChannelData(0);t.volume=parseInt(100*Math.max.apply(Math,n))}},onError:function(e){console.log(e),this.$message.error("麦克风未授权， 请设置浏览器")},triggerMike:function(){this.context.resume()},getVolumeFromOthers:function(){var e=this;this.rtcRoom.on("audio-volume-change",(function(t,n){t===e.id&&(e.volume=100*n)}))}}}},72:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Speaker"}}}]);